general:
  branches:
    ignore:
      - master

machine:
  timezone: Asia/Tokyo
  node:
    version: 8.2.0

dependencies:
  pre:
    - git config --global user.name "Masaki Komagata"
    - git config --global user.email "komagata@gmail.com"
    - wget https://github.com/gohugoio/hugo/releases/download/v0.26/hugo_0.26_Linux-64bit.deb
    - sudo dpkg -i hugo_0.26_Linux-64bit.deb

test:
  override:
    - echo "dummy"

deployment:
  production:
    branch: source
    commands:
      - rm -rf docs
      - npm install
      - HUGO_ENV=production webpack
      - hugo
      - git clone git@github.com:fjordllc/fjordllc.git master
      - rm -rf master/docs
      - cp -rp docs master/
      - cd master
      - git commit -a -m 'Update articles'
      - git push origin master --force