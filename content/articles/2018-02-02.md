---
title: 本当は怖くないRuby on Rails Part.2
author: komagata
date: 2018-02-02T00:01:07+09:00
url: /articles/2018-02-02.html
draft: true
categories:
  - blog
tags:
  - dont-be-afraid-rails
---
## 自分のページを表示してみよう
{{% teacher %}}
さて、Railsを立ち上げることができたので、用意されているページではなく、自分で書いたページを表示してみましょう。
{{% /teacher %}}
{{% student %}}
ここからがRails入門の本番ですね！
{{% /student %}}
{{% teacher %}}
はい、がんばってください。

自分で書いたページを表示するには最低下記の3つのファイルが必要です。

- View（ビュー）
- Controller（コントローラー）
- routes（ルーツ）
{{% /teacher %}}
{{% student %}}
ふむふむ。
{{% /student %}}
{{% teacher %}}
ViewはHTMLを書くファイルです。これはHTMLにrubyを混ぜて書くことのできるerbという形式で書きます。

Controllerはデータベースから値を取ってきたり、Viewで表示したいものを変数に詰めたりといったRubyでの処理を書くファイルです。

routesはどのURLでどのControllerを表示するのか、といった設定を書くファイルです。
{{% /teacher %}}
{{% student %}}
なんとなく、rubyでいろいろ書くためのファイルとHTMLを書くファイルがあるというのはわかりますが、routesっていうのがピンときません。
{{% /student %}}
{{% teacher %}}
確かにそうかもしれません。とにかく一番シンプルなページを書いてみましょう。そうすれば上記で言った意味がわかると思いますよ。
{{% /teacher %}}
{{% student %}}
わかりました。
{{% /student %}}
{{% teacher %}}
まずはViewを書きましょう。`bundle install`したディレクトリから見て`app/views/home/index.html.erb`に下記のような内容のファイルを作ってください。`home`ディレクトリは無いと思うので作ってくださいね。

app/views/home/index.html.erb:

```erb
<h1>Hello, Rails</h1>
```
{{% /teacher %}}
{{% student %}}
簡単なHTMLですね。`index.html.erb`というお尻に色々付いているファイル名が見慣れないですが・・・。
{{% /student %}}
{{% teacher %}}
確かにそうですね。railsのViewのファイル名は下記のようなルールになっています。

`名前.最終的に出力されるフォーマット.テンプレートファイルのフォーマット`

今回の場合は`index`はいいとして、最終的に`html`フォーマットで出力されて、このテンプレートファイル自体のフォーマットは前述した`erb`なので、`index.html.erb`になります。

`index.html.slim`だったら、HTMLで出力することは変わらないが、テンプレートがerbではなくslimという形式だと言う意味になります。
{{% /teacher %}}
{{% student %}}
WebアプリでHTML以外に何か出力することがあるんですか？
{{% /student %}}
{{% teacher %}}
帳票をPDFで出す時に`item.pdf.erb`となったり、プレーンテキストを`index.txt.erb`で出したりしますよ。
{{% /teacher %}}
{{% student %}}
へ〜色々出せるんですね。
{{% /student %}}
{{% teacher %}}
話を続けましょう。今度はControllerを作ります。`app/controllers/home_controller.rb`というファイル名で下記の内容のファイルを作ってください。

app/controllers/home_controller.rb:

```ruby
class HomeController < ApplicationController
  def index                    
  end
end
```
{{% /teacher %}}
{{% student %}}
あ、これは私にもわかりますよ。これはクラスの継承ですよね？ApplicationControllerクラスを継承したHomeControllerクラスを作っています。あと空っぽのindexメソッドがあります。
{{% /student %}}
{{% teacher %}}
Rubyの課題をきちんとやっていたようですね。その通りです。indexメソッドには今はとりあえず何も書かなくてOKです。
{{% /teacher %}}
{{% student %}}
Rubyを勉強している時にクラスの継承なんていつ使うのかなって思ってたんですが、いきなり出てきました。
{{% /student %}}
{{% teacher %}}
それではどんどん行きましょう。次はroutesを作ります。routesファイルは既にあると思います。`config/routes.rb`を下記のように修正してください。

config/routes.rb:

```ruby
Rails.application.routes.draw do
  get "/home", to: "home#index"
end
```

View、Controller、Routesの3つのファイルが書けたら`http://localhost:3000/home`にアクセスしてみてください。
{{% /teacher %}}
{{% student %}}
あ！私の書いたHTMLが表示されました！
![ss](https://i.gyazo.com/cc421d38e0f6166bd99333f1f080f91e.png)
{{% /student %}}
{{% teacher %}}
HTMLはわかりますよね。好きにHTMLを書き換えてみてください。
{{% /teacher %}}
{{% student %}}
なるほど！Viewファイルを好きに変えれば好きな表示ができるんですね。

できました！
{{% /student %}}
{{% teacher %}}
これは・・・なんですか？

![https://gyazo.com/84ebc475d2733e8a37309a6891eb7b69](https://i.gyazo.com/84ebc475d2733e8a37309a6891eb7b69.png)
{{% /teacher %}}
{{% student %}}
羊羹の名作、とらやの夜の梅・・・です！（ゴクリ・・・）
{{% /student %}}
{{% teacher %}}
まあ好きに書き換えろと言ったのでいいでしょう。そうです。そうやってViewファイルにHTMLを書いていけば自分のWebページができそうだということはわかりましたか？
{{% /teacher %}}
{{% student %}}
はい！でもこれだと普通にHTMLを置いたほうが楽ですね。
{{% /student %}}
{{% teacher %}}
その通りですね。Viewがerbであることを活かしてちょっとアプリっぽくしましょう。

Viewを下記のように変えてみてください。

app/views/home/index.html.erb:

```erb
<p>只今の時間: <%= Time.now %></p>
```
{{% /teacher %}}
{{% student %}}
今の時間が表示されました。

![https://gyazo.com/5c3cbb1c3401b1d2862645776a7b8ccc](https://i.gyazo.com/5c3cbb1c3401b1d2862645776a7b8ccc.png)
{{% /student %}}
{{% teacher %}}
erbでは`<%`と`%>`の間にrubyが書けます。最初に`<%=`と書くとその式の結果をその場所に埋め込んでくれます。これ場合は`Time.now`の結果をHTMLに埋め込んでくれます。
{{% /teacher %}}
{{% student %}}
あれ？rubyで出力するのは`puts`じゃなかったでしたっけ？
{{% /student %}}
{{% teacher %}}
良い質問ですね。では`<%= Time.now %>`の代わりに`<% puts Time.now %>`と書いてみてください。
{{% /teacher %}}
{{% student %}}
あっ、時間がでなくなった。

![ss](https://i.gyazo.com/e91c60c16d42af34354a65bd16740dfd.png)

時間はどこに行ったんでしょう？
{{% /student %}}
{{% teacher %}}
`rails server`でアプリを立ち上げたTerminalを見てください。
{{% /teacher %}}
{{% student %}}
あ、こっちに出てる！

![https://gyazo.com/8852224b38ab8f2da6b0570091fa657c](https://i.gyazo.com/8852224b38ab8f2da6b0570091fa657c.png)
{{% /student %}}
{{% teacher %}}
詳しい仕組みは省きますが、Viewの中での`puts`や`print`の出力先はあくまでTerminalなので注意してくださいね。
{{% /teacher %}}
{{% student %}}
はーい！
{{% /student %}}

{{< bootcamp >}}