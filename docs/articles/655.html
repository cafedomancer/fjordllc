<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/assets/application.css?2017-08-14%2015%3a23%3a19.821130967%20%2b0900%20JST">
  <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto:400,700|Roboto+Mono:400,500" rel="stylesheet">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="http://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha256-k2WSCIexGzOj3Euiig+TlR8gA0EmPjuc79OEeY5L45g=" crossorigin="anonymous"></script>
  <script src="/assets/application.js"></script>
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="FJORD,LLC">
  
  <title>Webデザイナーの為の「本当は怖くない」”黒い画面”入門 Part.08 - FJORD,LLC</title>
</head>

<body>
<header class="header">
  <div class="container is-padding-horizontal-0-xs-down">
    <div class="header__inner">
      <p class="header__site-name">
        合同会社フィヨルド
      </p>
      <img src="/images/icicle.svg" class="header__icicle-image" alt="Icicle">
    </div>
  </div>
</header>
<div class="hero">
  <div class="container">
    <div class="hero__inner">
      <h1 class="hero__site-title"><a href="/" data-text="FJÖRD,LLC." class="hero__site-title-link">
        <img src="/images/logo.svg" alt="FJÖRD,LLC." class="hero__site-title-link-image"></a>
      </h1>
      <nav class="global-nav">
  <ul class="global-nav__items">
    <li class="global-nav__item">
      <a href="/articles" class="global-nav__item-link">Articles</a>
    </li>
    <li class="global-nav__item">
      <a href="/contact/" class="global-nav__item-link">Contact</a>
    </li>
    <li class="global-nav__item">
      <a href="https://kulku.me/routes/463" class="global-nav__item-link" target="_blank">Access</a>
    </li>
    <li class="global-nav__item">
      <a href="http://256interns.com/" class="global-nav__item-link" target="_blank">Internship</a>
    </li>
  </ul>
</nav>

      <a href="/commissioned-development/" class="hero-important-link">
        <span class="hero-important-link__label">受託開発の<br>ご案内</span>
        <img src="/images/important-link-arrow.svg" class="hero-important-link__image">
      </a>
    </div>
  </div>
</div>


<div class="body is-article">
  <article class="article">
    <div class="sm-container" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting">
      <div class="article__inner">
				<article class="article__content">
  <header class="article__header">
    <h1 class="article__title" itemprop="headline">
			<a href="/articles/655.html" class="article__title-link">
        Webデザイナーの為の「本当は怖くない」”黒い画面”入門 Part.08
			</a>
    </h1>
    <time class="article-publish-at" itemprop="datePublished" datetime="2010-12-20">
	<span class="article-publish-at__year">2010</span>
	<span class="article-publish-at__date"><span class="article-publish-at__date-slash is-first">/</span>12<span class="article-publish-at__date-slash">/</span>20</span>
</time>

    
  
    <div class="tags article-tags" itemprop="keywords">
      <ul class="article-tags__items">
        
          <li class="article-tags__item">
            <a href="/tags/dont-be-afraid-kuroigamen" class="article-tags__link">dont-be-afraid-kuroigamen</a>
					</li>
        
          <li class="article-tags__item">
            <a href="/tags/kuroigamen" class="article-tags__link">kuroigamen</a>
					</li>
        
      </ul>
    </div>
  


  </header>
  <div class="post-body js-target-blank article__body" itemprop="articleBody">
    

<p><a href="http://fjord.jp/tag/dont-be-afraid-kuroigamen">Webデザイナーの為の「本当は怖くない」”黒い画面”入門シリーズ一覧</a></p>

<h4 id="作業の自動化">作業の自動化</h4>

<p>&#8220;黒い画面&#8221;での作業は文字を打ち込むだけの単純で厳密な手順なので簡単に自動化できます。</p>

<p>例えば、僕は<a href="http://lokka.org/">lokka</a>というソフトを作っていますが、新しいバージョンをリリースする時に、その時の最新のファイルをダウンロードしてきてzipファイルに固める必要があります。下記のようなコマンドでそれが可能です。</p>

<pre><code>$ git clone git://github.com/komagata/lokka.git lokka
$ zip -r lokka.zip lokka
$ rm -r lokka
</code></pre>

<p>gitというコマンドで最新のファイルをlokkaというディレクトリ名でダウンロードしてきて、zipコマンドでzipに圧縮し、元のディレクトリはもう要らないのでrmコマンドで削除しています。</p>

<p>実はこれをそのままファイルに書くだけで自動化が可能です。make-lokka-zipfileという分り易いファイル名に上記コマンドを書きました。catコマンドで確認するとこんな感じです。</p>

<pre><code>$ cat make-lokka-zipfile
git clone git://github.com/komagata/lokka.git lokka
zip -r lokka.zip lokka
rm -r lokka
</code></pre>

<p>そのままです。&#8221;黒い画面&#8221;に打ち込んでいた文字をファイルに書いただけですね。そのファイルを実行するには下記のようにshコマンドに渡します。</p>

<pre><code>$ sh make-lokka-zipfile
</code></pre>

<p>ファイルの中に書いたコマンドを順番に実行してくれます。このようにやって欲しいコマンドを順番に書いたファイルをscript(スクリプト)と言います。scriptは演劇などの台本という意味なのでそのままですね。台本通りに&#8221;黒い画面&#8221;が動いてくれるわけです。phpプログラムの事をphpスクリプトと言ったりすることがありますが、program(プログラム)も予定表・計画表という意味なので殆ど同じ意味です。</p>

<p>ただ一点、shという謎のプログラムにファイルを渡して実行するという書き方がどうも野暮ったいです。lsみたいに自分の書いたスクリプトもコマンドっぽく実行したいところです。</p>

<h4 id="謎のおまじない-8221-シバン-8221">謎のおまじない&#8221;シバン&#8221;</h4>

<p>&#8220;黒い画面&#8221;にはスクリプトを単体で実行するためにshebang(シバン)という機能があります。</p>

<pre><code>#!/bin/sh
echo hello
</code></pre>

<p>上記をecho-helloというファイル名で保存して実行してみてください。</p>

<pre><code>$ chmod u+x echo-hello
$ /Users/komagata/echo-hello
hello
</code></pre>

<p>chmodはChenge MODeの略でファイルの権限を変更するコマンドです。echo-helloというファイルにユーザー実行権限(u+x)を追加しています。</p>

<p>shebangとは1行目の最初の2文字</p>

<pre><code>#!
</code></pre>

<p>の事です。sharp bangが短くなってshebangとなったそうです。また、アメリカの俗語、the whole shebang(何もかも、一切合切)というのと掛けてるという説もあるそうです。シャープはわかります!が「バン！」って感じなのは日本人にはわかり辛いですね。でも#!の事を日本人は「シャープびっくり」と言ったりするので似たようなもんだと思います。</p>

<p>shebangは何なのかというと、</p>

<p>「&#8221;黒い画面&#8221;で実行しようとしたファイルの1行目の最初の二文字が#!だったら、その後に書いてあるコマンドに2行目以降の全てを渡す」</p>

<p>という機能です。</p>

<p class="center">
  <a href="http://www.flickr.com/photos/komagata/5277789106/" title="ターミナル — vim — 61×20 by komagata, on Flickr"><img src="http://farm6.static.flickr.com/5289/5277789106_cfa293ab3f.jpg" width="500" height="322" alt="ターミナル — vim — 61×20" /></a>
</p>

<p>もう&#8221;黒い画面&#8221;を作った人がそうなるように作りましたという以外に説明しようがないそのままの機能です。確かに便利ですが、他にやりようは無かったのか疑問です。</p>

<p>このshebangを利用すれば様々なスクリプトを単体で実行できる独自のコマンドにすることができます。</p>

<p class="center">
  <a href="http://www.flickr.com/photos/komagata/5276712507/" title="ターミナル — bash — 79×24 by komagata, on Flickr"><img src="http://farm6.static.flickr.com/5044/5276712507_03b31b1595.jpg" width="500" height="314" alt="ターミナル — bash — 79×24" /></a>
</p>

<p>phpもスクリプトをphpコマンドに渡すという点では全く同じなのでこうやって独自のスクリプトを作ることが出来ます。</p>

<p>しかし当然、普通のテキストファイルで、もしファイルの一行目最初の2文字が#!だったら、2行目以降を1行目のプログラムに渡して実行しようとします・・・。</p>

<p class="center">
  <a href="http://www.flickr.com/photos/komagata/5277755924/" title="ターミナル — bash — 80×24 by komagata, on Flickr"><img src="http://farm6.static.flickr.com/5044/5277755924_13bd315674.jpg" width="500" height="313" alt="ターミナル — bash — 80×24" /></a>
</p>

<p>もちろんfooなどというコマンドは無いのでエラーになります。interpreter(インタプリタ)というのはshやphpのようにスクリプトを実行する種類のプログラムのことです。</p>

<h4 id="pathを設定する">PATHを設定する</h4>

<p>自分独自のスクリプトはどこに置けばいいのでしょうか。/binや/usr/binはシステムの動作に必要なコマンドを置く場所です。/usr/local/binは全ユーザー(例えばkomagataとmachida)で共有するようなコマンドなら置いても構わないでしょう。今回作ったような自分だけが使うようなスクリプトはホームディレクトリにbinというディレクトリを作ってそこに置く人が多いようです。</p>

<pre><code>$ mkdir bin
$ mv make-lokka-zipfile bin/
</code></pre>

<p>置きました。しかし/Users/komagata/binは以前説明したPATHに含まれてないのでいちいちフルパスで打つ必要があって不便です。そこで自分でPATHを設定してみましょう。</p>

<pre><code>$ export PATH=$PATH:~/bin
</code></pre>

<p>exportは環境変数を設定するコマンドです。envコマンドの出力結果のように環境変数名と中身を=(イコール)で区切って渡すとその値に設定されます。</p>

<p>~/binというのは妙ですね。これは$HOME/binと同じ意味です。&#8221;黒い画面&#8221;では$HOMEを~(チルダ)一文字で表すことができます。</p>

<p>環境変数PATHは:(コロン)で区切ってディレクトリ名をつなげたものでした。上記は&#8221;今までPATHに設定されてたものに~/binを追加する&#8221;という意味になります。</p>

<pre><code>$ echo $PATH
/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/Users/komagata/bin
</code></pre>

<p>echoで確認するとちゃんと/Users/komagata/binがPATHに追加されているのがわかります。</p>

<pre><code>$ make-lokka-zipfile
</code></pre>

<p>これで自分独自のスクリプトがまるでコマンドのように使えるようになりました。便利ですね。</p>

<p>面倒な手順や覚え辛いオプションの組み合わせなどはスクリプトにしてしまいましょう。</p>

<div class="tips">
  <h5>
    作業を自動化して差をつけろ
  </h5>
  
  <p>
    今回覚えたように&#8221;黒い画面&#8221;で行う処理は簡単にスクリプトにすることができます。スクリプトを書いておけば2度目は自動的に一瞬で作業が終わるので仕事の効率化に役立ちます。
  </p>
  
  <p>
    以前、イベントのサイトを作る仕事がありました。イベントで撮った写真を次の日にはサイトに載せなければいけません。ところがその日のイベントの写真は600枚以上もあったのでとてもPhotoshopで一つ一つ縮小・形式変換していては間に合いません。
  </p>
  
  <p>
    そこで<a href="http://www.imagemagick.org/script/index.php">ImageMagick</a>というソフトのconvertというコマンドを使って、フォルダ内のファイル全てをリサイズして変換するというスクリプトを書いて、数十分で処理を終わらせました。そしてイベントがあるたびにそのスクリプトを実行すればいいようになったのでとても助かりました。
  </p>
  
  <p>
    ImageMagickはもちろんhomebrewでインストールできます。
  </p>
  
  <pre><code>$ brew install imagemagick</code></pre>
  
  <p>
    このように&#8221;黒い画面&#8221;は自動化ととても相性がいいのです。
  </p>
</div>

<p>次：<a href="http://fjord.jp/love/679.html">Webデザイナーの為の「本当は怖くない」”黒い画面”入門 Part.09</a></p>

  </div>
  <div class="disqus-comments">
    <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "fjord" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</article>

      </div>
			<nav class="previous-next-nav">
  <ul class="previous-next-nav__items">
		
      <li class="previous-next-nav__item is-previous">
				<a href="/articles/649.html" rel="prev" title="Webデザイナーの為の「本当は怖くない」”黒い画面”入門 Part.07" class="previous-next-nav__link">
          <i class="fa fa-angle-left previous-next-nav__icon is-previous"></i>
					<span class="is-hidden-sm-down">Webデザイナーの為の「本当は怖くない」”黒い画面”入門 Part.07</span>
				</a>
				<span class="previous-next-nav__label is-en">PREV</span>
      </li>
		

		
      <li class="previous-next-nav__item is-next">
				<a href="/articles/679.html" rel="next" title="Webデザイナーの為の「本当は怖くない」”黒い画面”入門 Part.09" class="previous-next-nav__link">
          <span class="is-hidden-sm-down">Webデザイナーの為の「本当は怖くない」”黒い画面”入門 Part.09</span>
					<i class="fa fa-angle-right previous-next-nav__icon is-next"></i>
				</a>
				<span class="previous-next-nav__label is-en">NEXT</span>
      </li>
		
  </ul>
</nav>

    </div>
  </article>
</div>
<footer class="footer" id="footer" role="contentinfo">
	<div class="container">
		<div class="footer__inner">
			<div class="row">
	      <div class="col-sm-8 col-xs-12">
	      </div>
	      <div class="col-sm-4 col-xs-12">
					<div class="footer__about-author">
  <div class="footer__about-author-inner">
    <small class="footer__copyright">Copyright<span class="footer__copyright-copy">©</span><span class="footer__copyright-year">2017</span><span class="footer__copyright-author">FJORD,LLC</span><span class="footer__copyright-reserved">All rights reserved.</span></small><nav class="sns-links">
      <ul class="sns-links__items">
        
				
          <li class="sns-links__item">
						<a href="https://github.com/rakuishi/" class="sns-links__link" target="_blank">
              <i class="fa fa-github-alt"></i>
						</a>
          </li>
				
				
          <li class="sns-links__item">
						<a href="https://github.com/rakuishi/" class="sns-links__link" target="_blank">
              <i class="fa fa-amazon"></i>
						</a>
          </li>
				
      </ul>
    </nav>
  </div>
</div>

				</div>
	    </div>
		</div>
	</div>
</footer>



</body>
</html>

